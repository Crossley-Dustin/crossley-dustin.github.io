<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>CIT 261 Walmart API sandbox</title>
        <!-- <link rel="stylesheet" type="text/css" href=""> -->
    </head>
    <body>
        <main>
            <header>
                <h2>CIT 261 Walmart API sandbox</h2>
            </header>
            <input type="text" name="productSearch" id="productSearch">
            <button onclick="doSearch()">Search</button>
        </main>
        <script>
            function doSearch(){
                var searchText = document.getElementById("productSearch").value;
                //alert(searchText);
                callWallyAPI(searchText);
                var searchResult = JSON.parse(localStorage.searchResult);
            }
            // function callWallyAPI(searchText){
            //     var xhr = new XMLHttpRequest();
            //     var url = "https://api.walmartlabs.com/v1/search?";
            //     var apiKey = "apiKey=kmtpdvh9ta3bnnzfepjw66w9";
            //     var query = "&query=" + searchText;
            //     var searchQuery = url + apiKey + query;
            //     xhr.onreadystatechange = function() {
            //         if (xhr.readyState == 4 && xhr.status == 200) {
            //             localStorage.setItem("searchResult", xhr.responseText);
            //             //return searchResult;
            //             //var response = JSON.parse(xhr.responseText);
            //             //showDetail(xhr.responseText,"daterInfo","div","col-4");
            //         }
            //     }
            //     xhr.open("GET",searchQuery,true);
            //     xhr.send();
            // }
            function callWallyAPI(searchText){
                var xhr = new XMLHttpRequest();
                var url = "https://api.walmartlabs.com/v1/search?";
                var apiKey = "apiKey=kmtpdvh9ta3bnnzfepjw66w9";
                var query = "&query=" + searchText;
                var searchQuery = url + apiKey + query;
                xhr.open("GET",searchQuery,true);
                xhr.onreadystatechange = function() {
                    if (xhr.readyState == 4 && xhr.status == 200) {
                        localStorage.setItem("searchResult", xhr.responseText);
                        //return searchResult;
                        //var response = JSON.parse(xhr.responseText);
                        //showDetail(xhr.responseText,"daterInfo","div","col-4");
                    }
                }
                xhr.setRequestHeader("Accept", "application/json");
                xhr.send(null);
            }
        </script>
    </body>

</html>
